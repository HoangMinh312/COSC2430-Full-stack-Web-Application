<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("partials/_head", {title: "Vendor add product"}) %>
    <script src="/js/rating.js"></script>
</head>
<body>
    <header>
        <!-- Navigation bar -->
        <%- include("partials/_navigation_bar"); %>
        <%- include("partials/_category_bar.ejs"); %>
    </header>
    <main class="px-[10%]">
        <section class="py-10">
            <!-- This could be breadcrumb (to be added) -->
            <div></div>
            <!-- Product preview -->
            <div class="center-x">
                <!-- Image -->
                <div class="aspect-square w-2/5">
                    <img class='shadow-sm w-h-full object-contain transition-300' src="<%= product.imageCoverData || "https://www.wowpatterns.com/assets/files/resource_images/diagonal-lines-vector-pattern.jpg" %>" alt="hero-image-2">
                </div>
                <!-- Information -->
                <div class="flex-auto flex flex-col w-3/5 px-5 py-2">
                    <!-- Brand -->
                    <h2 class="text-lg uppercase tracking-wider text-gray-400"><%- product.brand %></h2>
                    <!-- Name -->
                    <h1 class="text-3xl font-semibold"><%- product.name %></h1>
                    <!-- Price -->
                    <p class="text-2xl mt-2 font-semibold">$<%- product.price %></p>
                    <!-- Rating -->
                    <div class="rating mt-2 center-y" 
                        data-rating="<%= product.rating %>" 
                        data-review-number="<%= product.reviewNumber %>"
                    ></div>
                    <!-- Tags -->
                    <% let tags = ['Throwable', 'Edible', 'Cookable'] %>
                    <div class="my-2">
                        <p class="text-sm inline">Tags:</p>
                        <% tags.forEach(tag => { %>
                            <a class="px-2 py-[1.5px] text-xs rounded-2xl bg-violet-100" href="#"><%- tag %></a>
                        <% }); %>
                    </div>
                    <!-- Description -->
                    <p class="mt-4 text-gray-400"><%- product.description %></p>
                    
                    <div class="mt-auto flex flex-col">
                        <div class="center-xy gap-3 my-2 mr-auto">
                            <p class="text-lg">Quantity: </p>
                            <div class="center-x rounded-md border-solid-1 border-gray-300">
                                <!-- Decrease value -->
                                <button id="quantityDecrease" class="px-2 py-2"><svg class="w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12L14 6V18L8 12Z"></path></svg></button>
                                <!-- Value -->
                                <div id="editableQuantity" contenteditable="true" class="px-2 py-2 focus:outline-none">1</div>
                                <!-- Increase value -->
                                <button id="quantityIncrease" class="px-2 py-2"><svg class="w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 12L10 18V6L16 12Z"></path></svg></button>
                            </div>
                        </div>
                        <div class="center-xy gap-3 mt-2">
                            <button class="px-4 py-2 w-2/3 rounded-md bg-violet-500 text-white">Add to cart</button>
                            <button class="center-xy px-4 py-2 w-1/3 rounded-md border-solid-1 border-gray-300"><svg class="w-4 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.637 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.637 1.49571 7.01901 3.75736 4.75736C6.02157 2.49315 9.64519 2.41687 12.001 4.52853ZM18.827 6.1701C17.3279 4.66794 14.9076 4.60701 13.337 6.01687L12.0019 7.21524L10.6661 6.01781C9.09098 4.60597 6.67506 4.66808 5.17157 6.17157C3.68183 7.66131 3.60704 10.0473 4.97993 11.6232L11.9999 18.6543L19.0201 11.6232C20.3935 10.0467 20.319 7.66525 18.827 6.1701Z" fill="rgba(173,184,194,1)"></path></svg>Wishlist</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Policies -->
            <div class="center-y justify-between w-full px-2 py-4 my-2">
                <p class="center-xy gap-4 text-gray-500"><img class="w-5" src="/svg/double-check.svg" alt="double-check">Change of mind Applicable</p>
                <p class="center-xy gap-4 text-gray-500"><img class="w-5" src="/svg/truck.svg" alt="Shipping-truck">Enjoy free shipping promotion with minimum 3 items</p>
                <p class="center-xy gap-4 text-gray-500"><img class="w-5" src="/svg/shield-check.svg" alt="Shield-check"> Warranty available on all items</p>
            </div>
        </section>
    </main>
    <%- include("partials/_footer.ejs"); %>
</body>
<script>
    $(document).ready(function () {
        const editableQuantity = $("#editableQuantity")
        const quantityDecrease = $("#quantityDecrease")
        const quantityIncrease = $("#quantityIncrease")
        // Prevent the field from getting non-numeric value
        editableQuantity.keypress(e => {
            if (isNaN(String.fromCharCode(e.which))) e.preventDefault();
        });

        editableQuantity.on('input', function () {
            if (parseInt($(this).text()) >= 999) {
                $(this).text($(this).text().slice(0, -1))
            }
        })

        // Incase the user leave the field empty, default it to 1
        editableQuantity.on('blur', function() {
            if ($(this).is(':empty')) {
                $(this).text(1)
            }
        })

        quantityDecrease.on('click', () => {
            let currentValue = parseInt(editableQuantity.text())
            if (currentValue <= 1) return
            editableQuantity.text(currentValue - 1)
        })

        quantityIncrease.on('click', () => {
            let currentValue = parseInt(editableQuantity.text())
            if (currentValue >= 999) return
            editableQuantity.text(currentValue + 1)
        })

    });
</script>
</html>